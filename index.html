<script>
        document.getElementById('likertForm').addEventListener('submit', function(event) {
            event.preventDefault(); // يمنع إرسال النموذج بالطريقة التقليدية للصفحة

            let totalScore = 0;
            const questions = 12;
            let allAnswered = true;

            // حلقة تكرارية تمر على جميع الأسئلة لحساب المجموع
            for (let i = 1; i <= questions; i++) {
                const radios = document.getElementsByName('q' + i); // يحصل على جميع أزرار الراديو للسؤال الحالي
                let questionAnswered = false;
                for (let j = 0; j < radios.length; j++) {
                    if (radios[j].checked) { // يتحقق إذا كان زر الراديو هذا مُختارًا
                        const itemValue = parseInt(radios[j].value); // يحصل على القيمة الرقمية للإجابة
                        
                        // تحديد البنود السلبية التي تحتاج إلى عكس الترميز
                        const negativeItems = [2, 4, 6, 8, 9, 11, 12]; 

                        if (negativeItems.includes(i)) {
                            // إذا كان البند سلبيًا، يتم عكس الترميز: 1->5, 2->4, 3->3, 4->2, 5->1
                            totalScore += (6 - itemValue);
                        } else {
                            // البنود الإيجابية تُضاف قيمتها مباشرة
                            totalScore += itemValue;
                        }
                        
                        questionAnswered = true;
                        break; // يخرج من حلقة أزرار الراديو بعد العثور على الإجابة
                    }
                }
                if (!questionAnswered) { // إذا لم يتم الإجابة على سؤال، يعطي تنبيه
                    allAnswered = false;
                    break;
                }
            }

            if (!allAnswered) {
                alert('يرجى الإجابة على جميع البنود قبل الإرسال.');
                return; // يوقف تنفيذ السكريبت إذا لم يتم الإجابة على كل الأسئلة
            }

            // إخفاء جميع أقسام التغذية الراجعة أولاً
            document.getElementById('feedbackNegative').style.display = 'none';
            document.getElementById('feedbackNeutral').style.display = 'none';
            document.getElementById('feedbackPositive').style.display = 'none';

            // --- تحديد التغذية الراجعة بناءً على المجموع الكلي ---
            // بما أن لدينا 12 بندًا، وكل بند من 1 إلى 5 بعد عكس الترميز للبنود السلبية.
            // أدنى مجموع ممكن (كل الإجابات 1 في البنود الإيجابية و 5 في السلبية بعد عكسها) = 12 * 1 = 12
            // أعلى مجموع ممكن (كل الإجابات 5 في البنود الإيجابية و 1 في السلبية بعد عكسها) = 12 * 5 = 60
            
            // النطاقات الافتراضية المقترحة:
            // سلبية: 12 - 30
            // حيادية / مختلطة: 31 - 45
            // إيجابية: 46 - 60

            if (totalScore <= 30) {
                document.getElementById('feedbackNegative').style.display = 'block'; // يظهر قسم التغذية السلبية
            } else if (totalScore >= 31 && totalScore <= 45) {
                document.getElementById('feedbackNeutral').style.display = 'block'; // يظهر قسم التغذية الحيادية
            } else { // totalScore >= 46
                document.getElementById('feedbackPositive').style.display = 'block'; // يظهر قسم التغذية الإيجابية
            }
            
            // تمرير الصفحة تلقائيًا إلى قسم التغذية الراجعة بعد الإجابة
            // هذه الأسطر تضمن أن المستخدم سيرى التغذية الراجعة فورًا
            const feedbackSectionToShow = (totalScore <= 30) ? 'feedbackNegative' : (totalScore >= 31 && totalScore <= 45) ? 'feedbackNeutral' : 'feedbackPositive';
            document.getElementById(feedbackSectionToShow).scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
    </script>
